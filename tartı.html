
<!DOCTYPE html>
<html lang="tr">
<head>
 <link rel="icon" type="image/png" href="site.png">
 
<meta charset="UTF-8">
<title>Kese Oyunu - Geri Alma</title>
<style>
body {
  margin:0;
  font-family:sans-serif;
  background: url('https://i.imgur.com/io8q24n.jpeg') no-repeat center center fixed;
  background-size: cover;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
#game {
  width:800px;
  background: rgba(255,248,240,0.9);
  border:3px solid #b07f3e;
  border-radius:12px;
  padding:20px;
  text-align:center;
  box-shadow:0 6px 15px rgba(0,0,0,0.3);
}
h1 { color:#5c3a1a; }

#products {
  display:flex;
  justify-content:center;
  gap:20px;
  margin:20px 0;
}

.product {
  width:100px;
  height:100px;
  border:2px solid #b07f3e;
  border-radius:8px;
  cursor:grab;
}

#bag {
  width:250px;
  height:250px;
  margin:0 auto;
  border:2px dashed #b07f3e;
  border-radius:12px;
  background: rgba(255,255,255,0.7);
  position: relative;
}

#adjustContainer {
  margin-top:10px;
}

#feedback { margin-top:15px; font-weight:bold; }
#respect { margin-top:10px; font-weight:bold; color:#333; }

.buttonBack {
  padding:8px 15px;
  margin-bottom:10px;
  border:none;
  background:#b07f3e;
  color:white;
  border-radius:8px;
  cursor:pointer;
  font-size:15px;
}
</style>
</head>
<body>

<div id="game">

  <!-- ğŸ“Œ GERÄ° DÃ–N BUTONU -->
  <button class="buttonBack" onclick="history.back()">âŸµ Geri DÃ¶n</button>

  <h1>Kese Oyunu</h1>

  <p id="customerRequest">MÃ¼ÅŸteri ÅŸunu istiyor: </p>

  <div id="products">
    <img src="https://i.imgur.com/JTPBndQ.png" class="product" draggable="true" data-type="et">
    <img src="https://i.imgur.com/cwSPPli.png" class="product" draggable="true" data-type="peynir">
    <img src="https://i.imgur.com/TsqDCaT.png" class="product" draggable="true" data-type="elma">
  </div>

  <div id="bag"></div>

  <div id="adjustContainer">
    <p>Torbadaki Ã¼rÃ¼nÃ¼ seÃ§ip miktarÄ±nÄ± geri al:</p>
    <select id="bagSelect">
      <option value="">SeÃ§iniz</option>
    </select>
    <input type="range" id="slider" min="0" max="0" value="0">
    <span id="sliderValue">0</span> gr
    <button onclick="returnFromBag()">Geri Al</button>
  </div>

  <button onclick="serveBag()">Servis Et</button>
  <div id="feedback"></div>
  <div id="respect">SaygÄ± PuanÄ±: 100</div>
</div>
<script>
/* ========== NASIL OYNANIR PANELÄ° ========== */

function createHowToPlayPanel() {
    if (document.getElementById("howToPlayOverlay")) return;

    // Oyun durdur
    isPaused = true;

    const overlay = document.createElement("div");
    overlay.id = "howToPlayOverlay";
    overlay.style.position = "fixed";
    overlay.style.top = "0";
    overlay.style.left = "0";
    overlay.style.width = "100%";
    overlay.style.height = "100%";
    overlay.style.background = "rgba(0,0,0,0.75)";
    overlay.style.backdropFilter = "blur(10px)";
    overlay.style.display = "flex";
    overlay.style.alignItems = "center";
    overlay.style.justifyContent = "center";
    overlay.style.zIndex = "9999999";
    overlay.style.animation = "fadeIn 0.5s ease";

    overlay.innerHTML = `
        <div id="howToPlayPanel">
            <h1>ğŸ® Oyun Bilgilendirme âœ¨</h1>

            <p>
               Bu oyun, Ahilik kÃ¼ltÃ¼rÃ¼ne ait Ã¶zlÃ¼ sÃ¶zleri ğŸ“œ Ã¶ÄŸretici ve eÄŸlenceli bir ÅŸekilde sunmak iÃ§in hazÄ±rlanmÄ±ÅŸtÄ±r.
Oyuncu, verilen sÃ¶zlerdeki eksik kelimeyi ğŸ§© doÄŸru seÃ§enekler arasÄ±ndan tamamlar.
            </p>

            <ul>
               Oyunda gÃ¼nlÃ¼k en fazla 5 soru â³ Ã§Ã¶zÃ¼lebilir.
Her doÄŸru cevap 20 puan â­ kazandÄ±rÄ±r.
YanlÄ±ÅŸ cevaplarda tekrar deneme yapÄ±labilir ğŸ”

            </ul>

            <p>
                Sorular, Ahilik geleneÄŸi ve Ahi Evran ğŸ›ï¸ kaynaklÄ±dÄ±r.
Oyun, bilgi ve dikkat ğŸ¯ temelli bir eÄŸitim oyunudur
            </p>

            <button id="startGameBtn">OYUNA BAÅLA</button>
        </div>
    `;

    document.body.appendChild(overlay);

    // CSS (tek sefer eklenir)
    if (!document.getElementById("howToPlayStyle")) {
        const style = document.createElement("style");
        style.id = "howToPlayStyle";
        style.innerHTML = `
            #howToPlayPanel {
                background: linear-gradient(145deg, #0d1a26, #ad9a4c);
                border: 2px solid #b07f3e;
                border-radius: 20px;
                padding: 40px;
                width: 520px;
                max-width: 90%;
                color: #c9c9c7;
                font-family: 'Orbitron', sans-serif;
                text-align: center;
                box-shadow: 0 0 40px rgba(255,215,0,0.6);
                transform: scale(0.85);
                animation: panelIn 0.5s ease forwards;
            }

            #howToPlayPanel h1 {
                color: #FFD700;
                margin-bottom: 20px;
                text-shadow: 0 0 10px rgba(255,215,0,0.6);
            }

            #howToPlayPanel p {
                font-size: 15px;
                line-height: 1.6;
                margin-bottom: 15px;
            }

            #howToPlayPanel ul {
                text-align: left;
                margin: 20px 0;
                padding-left: 20px;
            }

            #howToPlayPanel li {
                margin-bottom: 10px;
                font-size: 14px;
            }

            #howToPlayPanel span {
                color: #917f59;
                font-weight: bold;
            }

            #startGameBtn {
                margin-top: 20px;
                padding: 14px 35px;
                font-size: 16px;
                font-weight: bold;
                border: none;
                border-radius: 12px;
                background:#917f59;
                color: #d4cba5;
                cursor: pointer;
                box-shadow: 0 0 20px rgba(255,215,0,0.6);
                transition: 0.2s;
            }

            #startGameBtn:hover {
                transform: scale(1.05);
                box-shadow: 0 0 30px rgba(255,215,0,0.6);
            }

            @keyframes panelIn {
                to { transform: scale(1); }
            }

            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
        `;
        document.head.appendChild(style);
    }

    document.getElementById("startGameBtn").onclick = () => {
        overlay.style.animation = "fadeIn 0.3s reverse";
        setTimeout(() => {
            overlay.remove();
            isPaused = false;
        }, 250);
    };
}

// Oyun yÃ¼klendiÄŸinde otomatik aÃ§
window.addEventListener("load", () => {
    setTimeout(createHowToPlayPanel, 500);
});
</script>

<script>
let respect = 100;
const products = ['et','peynir','elma'];
let customerProduct = '';
let customerGram = 0;

let bagItems = []; // {type: 'et', weight: 100}

function newCustomer(){
  customerProduct = products[Math.floor(Math.random()*products.length)];
  customerGram = Math.floor(Math.random()*1500)+50; 
  document.getElementById('customerRequest').textContent = 
    `MÃ¼ÅŸteri ${customerGram} gram ${customerProduct} istedi.`;
  bagItems = [];
  updateBagSelect();
  updateBagFeedback();
  slider.value = 0;
  slider.max = 0;
  document.getElementById('sliderValue').textContent = '0';
}

newCustomer();

const bag = document.getElementById('bag');

document.querySelectorAll('.product').forEach(p=>{
  p.addEventListener('dragstart', e=>{
    const randomGram = Math.floor(Math.random()*250)+50;
    e.dataTransfer.setData('text/plain', randomGram);
    e.dataTransfer.setData('type', p.dataset.type);
  });
});

bag.addEventListener('dragover', e=>{ e.preventDefault(); });

bag.addEventListener('drop', e=>{
  e.preventDefault();
  const w = parseInt(e.dataTransfer.getData('text/plain'));
  const t = e.dataTransfer.getData('type');

  if(t !== customerProduct){
    alert(`Bu Ã¼rÃ¼n mÃ¼ÅŸteri tarafÄ±ndan istenmiyor!`);
    return;
  }

  let existing = bagItems.find(item => item.type === t);
  if(existing){
    existing.weight += w;
  } else {
    bagItems.push({type: t, weight: w});
  }

  updateBagSelect();
  updateBagFeedback();
});

function updateBagSelect(){
  const select = document.getElementById('bagSelect');
  select.innerHTML = '<option value="">SeÃ§iniz</option>';
  bagItems.forEach((item,index)=>{
    select.innerHTML += `<option value="${index}">${item.type} - ${item.weight} gr</option>`;
  });
  updateSlider();
}

function updateSlider(){
  const idx = document.getElementById('bagSelect').value;
  if(idx === ''){
    slider.max = 0;
    slider.value = 0;
    sliderValue.textContent = '0';
  } else {
    slider.max = bagItems[idx].weight;
    slider.value = 0;
    sliderValue.textContent = '0';
  }
}

bagSelect.addEventListener('change', updateSlider);

slider.addEventListener('input', ()=>{
  sliderValue.textContent = slider.value;
});

function returnFromBag(){
  const idx = document.getElementById('bagSelect').value;
  if(idx === '') return;
  const reduce = parseInt(slider.value);
  if(reduce > bagItems[idx].weight){
    alert("Mevcut miktardan fazla geri alamazsÄ±nÄ±z!");
    return;
  }
  bagItems[idx].weight -= reduce;
  if(bagItems[idx].weight === 0) bagItems.splice(idx,1);
  updateBagSelect();
  updateBagFeedback();
}

function updateBagFeedback(){
  const total = bagItems.reduce((sum,item)=>sum+item.weight,0);
  document.getElementById('feedback').textContent = `Torbadaki toplam: ${total} gr`;
}

function serveBag(){
  const total = bagItems.reduce((sum,item)=>sum+item.weight,0);
  const diff = total - customerGram;
  let feedback='';

  if(diff >= -50 && diff <= 50){
    feedback = `âœ… Miktar uygun!`;
  } else if(diff < -50){
    feedback = `âŒ Az verdin! SaygÄ± puanÄ± dÃ¼ÅŸtÃ¼.`;
    respect -= 10;
  } else if(diff > 50){
    feedback = `âŒ Ã‡ok verdin! SaygÄ± puanÄ± dÃ¼ÅŸtÃ¼.`;
    respect -= 5;
  }

  document.getElementById('feedback').textContent = feedback;
  document.getElementById('respect').textContent = "SaygÄ± PuanÄ±: " + respect;

  newCustomer();
}
</script>

</body>
</html>
